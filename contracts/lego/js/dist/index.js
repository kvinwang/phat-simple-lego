(()=>{"use strict";var __webpack_modules__={730:(e,t)=>{},252:()=>{!function(e){function t(e){var t=0|e.charCodeAt(0);if(55296<=t)if(56320>t)if(56320<=(e=0|e.charCodeAt(1))&&57343>=e){if(65535<(t=(t<<10)+e-56613888|0))return i(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533;else 57343>=t&&(t=65533);return 2047>=t?i(192|t>>>6,128|63&t):i(224|t>>>12,128|t>>>6&63,128|63&t)}function n(){}function r(e,n){var r=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,t),i=0|r.length,c=0,o=0,u=0|n.length,s=0|e.length;u<i&&(i=u);e:for(;c<i;c=c+1|0){switch((e=0|r.charCodeAt(c))>>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o=o+1|0;case 8:case 9:case 10:case 11:break;case 12:case 13:if((c+1|0)<u){o=o+1|0;break}case 14:if((c+2|0)<u){o=o+1|0;break}case 15:if((c+3|0)<u){o=o+1|0;break}default:break e}n[c]=e}return{written:c,read:s<o?s:o}}var i=String.fromCharCode,c=e.Uint8Array||Array,o=n.prototype,u=e.TextEncoder;if(o.encode=function(e){for(var n=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,t)).length,r=new c(n),i=0;i<n;i=i+1|0)r[i]=0|e.charCodeAt(i);return r},o.encodeInto=r,u){if(!(e=u.prototype).encodeInto){var s=new u;e.encodeInto=function(e,t){var n=0|e.length,i=0|t.length;if(n<(3+(i>>1)|0)){var c=s.encode(e);if((0|c.length)<i)return t.set(c),{read:n,written:0|c.length}}return r(e,t)}}}else e.TextEncoder=n}(globalThis),globalThis.TextDecoder=function(e,t){}},61:(e,t,n)=>{function r(e,t){if(!e)throw new Error("function"==typeof t?t():t)}n.d(t,{nn:()=>c,Qd:()=>F,nM:()=>P,zS:()=>C,I8:()=>I,Jj:()=>v,N6:()=>k,SN:()=>m,ij:()=>A}),Symbol("empty");var i=class extends Error{constructor(e){super(`offset (${e.idx}) is not equal to array bytes length (${e.u8.byteLength})`)}},c=class{static encode(e,t){const n=new c(new Uint8Array(t.sizeHint(e)));return t(e,n),n.checkFinalOffset(),n.u8}static decode(e,t){const n=new c(e),r=t(n);return n.checkFinalOffset(),r}u8;view;idx=0;constructor(e){if(!ArrayBuffer.isView(e))throw new Error(`Passed source is not an ArrayBufferView (${String(e)})`);this.u8=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}checkFinalOffset(){if(this.idx!==this.u8.byteLength)throw new i(this)}setOffset(e){return this.idx=e,this}};function o(e,t){return e.sizeHint=t,e}o((()=>{}),(()=>0)),o(((e,t)=>{t.u8[t.idx++]=e?1:0}),(()=>1));var u={i8:1,u8:1,i16:2,u16:2,i32:4,u32:4,i64:8,u64:8,i128:16,u128:16,i256:32,u256:32,i512:64,u512:64},s=e=>()=>u[e],a=e=>8===u[e],_=e=>u[e]<=4,f=e=>"i"===e[0];function d(e,t){const n=e<0,i=f(t);return r(!n||i,(()=>`Negative num (${e}) is passed to unsigned ("${t}") encoder`)),n}function l(e,t,n){d(e,t),r(Number.isSafeInteger(e),(()=>`Unsafe integer (${e}) is passed into encoder`));const{view:i,idx:c}=n;switch(t){case"i8":i.setInt8(c,e);break;case"u8":i.setUint8(c,e);break;case"i16":i.setInt16(c,e,!0);break;case"u16":i.setUint16(c,e,!0);break;case"i32":i.setInt32(c,e,!0);break;case"u32":i.setUint32(c,e,!0)}n.idx+=u[t]}function g(e,t){const{view:n,idx:r}=e;let i;switch(t){case"i8":i=n.getInt8(r);break;case"u8":i=n.getUint8(r);break;case"i16":i=n.getInt16(r,!0);break;case"u16":i=n.getUint16(r,!0);break;case"i32":i=n.getInt32(r,!0);break;case"u32":i=n.getUint32(r,!0)}return e.idx+=u[t],i}function h(e,t,n,r){let i=0;for(;e>0&&i<r;)t[n+i++]=Number(0xffn&e),e>>=8n;if(e>0)throw new Error(`Number ${e} is out of bytes limit (${r})`);return i}function p(e,t,n){if(_(t))return l(Number(e),t,n);if(a(t))return function(e,t,n){d(e,t);const{view:r,idx:i}=n;switch(t){case"u64":r.setBigUint64(i,e,!0);break;case"i64":r.setBigInt64(i,e,!0)}n.idx+=u[t]}(e,t,n);const r=d(e,t),i=u[t];r&&(e=BigInt.asUintN(8*i,e)),h(e,n.u8,n.idx,i),n.idx+=i}function b(e,t){if(_(t))return BigInt(g(e,t));if(a(t))return function(e,t){const{view:n,idx:r}=e;let i;switch(t){case"u64":i=n.getBigUint64(r,!0);break;case"i64":i=n.getBigInt64(r,!0)}return e.idx+=u[t],i}(e,t);const n=f(t),r=u[t],i=function(e,t,n){let r=n&&(128&e.u8[e.idx+t-1])>>7==1,i=0n;for(let n=0,r=0n;n<t;n++,r+=8n)i+=BigInt(e.u8[e.idx+n])<<r;return r&&(i=BigInt.asIntN(8*t,i)),i}(e,r,n);return e.idx+=r,i}function w(e){return o(((t,n)=>l(t,e,n)),s(e))}function E(e){return t=>g(t,e)}function y(e){return o(((t,n)=>p(t,e,n)),s(e))}function x(e){return t=>b(t,e)}w("u8"),E("u8"),w("i8"),E("i8");var v=w("u16"),k=(E("u16"),w("i16"),E("i16"),w("u32")),m=(E("u32"),w("i32"),E("i32"),y("u64")),I=(x("u64"),y("i64"),x("i64"),y("u128")),D=(x("u128"),y("i128"),x("i128"),2**30-1),O=(e,t)=>{if(!(e>=0)||!Number.isInteger(e)&&"bigint"!=typeof e)throw new Error(`Invalid number is passed: ${e}. It should be non-negative integer.`);if(e<=63)return void(t.u8[t.idx++]=Number(e)<<2);if(e<=16383)return void p((BigInt(e)<<2n)+0b01n,"u16",t);if(e<=D)return void p((BigInt(e)<<2n)+0b10n,"u32",t);const n=h(BigInt(e),t.u8,t.idx+1,1/0);t.u8[t.idx]=3+(n-4<<2),t.idx+=1+n};O.sizeHint=function(e){return e<=63?1:e<=16383?2:e<=D?4:1+function(e){let t=0;for(;e>0;)t++,e>>=8n;return t}(BigInt(e))};var A=o(((e,t)=>{O(e.byteLength,t),t.u8.set(e,t.idx),t.idx+=e.byteLength}),(e=>O.sizeHint(e.byteLength)+e.byteLength)),U=new TextEncoder;function B(e){let t=e.length;for(let n=e.length-1;n>=0;n--){const r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&n--}return t}new TextDecoder("utf-8",{fatal:!0});var C=o(((e,t)=>{const n=B(e);O(n,t);const r=U.encodeInto(e,t.u8.subarray(t.idx));if(r.written!==n)throw new Error(`SCALE internal error: counting of string bytes length is incorrect; string: "${e}"; actual bytes length: ${r.written}; computed: ${n}; please report a bug.`);t.idx+=n}),(e=>{const t=B(e);return t+O.sizeHint(t)}));function P(e){return o(((t,n)=>function(e,t,n){for(let r=0,i=t.length,c=null;r<i;r++)c=t[r],c[1](e[c[0]],n)}(t,e,n)),(t=>function(e,t){let n=0;for(let r=t.length-1,i=null;r>=0;r--)i=t[r],n+=i[1].sizeHint(e[i[0]]);return n}(t,e)))}var M=(e,t)=>{const n=e[t];return"number"==typeof n?[n]:n||null},$=class extends Error{constructor(e,t){super(e+`; encoders schema: ${(e=>Object.entries(e).map((([e,t])=>{const[n,r]="number"==typeof t?[t,!1]:[t[0],!0];return`${e}${r?"(...)":""} => ${n}`})).join(", "))(t)}`)}};function F(e){return o(((t,n)=>function(e,t,n){const[r,i]=M(t,e.tag);n.u8[n.idx++]=r,i&&i(e.value,n)}(t,e,n)),(t=>function(e,t){const{tag:n,isEmpty:r}=e,i=M(t,n);if(null===i)throw new $(`Invalid encode schema for Enum with tag "${n}": ${t[n]}`,t);const[,c]=i;if(c){if(r)throw new $(`Enum with tag "${n}" is empty, but supposed not to be`,t);return 1+c.sizeHint(e.value)}if(!r)throw new $(`Enum with tag "${n}" is not empty, but supposed to be`,t);return 1}(t,e)))}o(((e,t)=>{t.u8[t.idx++]=e.is("None")?0:e.as("Some")?1:2}),(()=>1))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var _polyfills_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(252),_phala_pink_env__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(730),_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(61);const pink=globalThis.pink;function actionFetch(e,t){let n;n="string"==typeof e.config?{url:e.config}:e.config;let r={};"string"!=typeof t&&"object"!=typeof t||(r="string"==typeof t&&t.length>0?{url:t}:t),r={...n,...r};const{url:i,method:c,headers:o,body:u,returnTextBody:s}=r;if("string"!=typeof i)throw new Error("fetching with invalid url");const a=pink.httpRequest({url:i,method:c,headers:o,body:u,returnTextBody:s});if(!r.allowNon2xx&&(a.statusCode<200||a.statusCode>=300))throw new Error(`http request failed with status code ${a.statusCode}`);return a}function actionCall(e,t){const n=e.config;if(!(t instanceof Uint8Array))throw new Error("call contract input must be a Uint8Array");return pink.invokeContract({...n,input:t})}function actionEval(action,input){const script=action.config;if("string"!=typeof script)throw new Error("Trying to eval non-string");const scale={encode:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.nn.encode,encodeU128:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.I8,encodeU64:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.SN,encodeU32:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.N6,encodeU16:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.Jj,encodeUint8Vec:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.ij,encodeStr:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.zS,createStructEncoder:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.nM,createEnumEncoder:_scale_codec_core__WEBPACK_IMPORTED_MODULE_2__.Qd};return eval(script)}function runAction(e,t){switch(e.cmd){case"call":return actionCall(e,t);case"eval":return actionEval(e,t);case"fetch":return actionFetch(e,t);case"log":return t;default:throw new Error(`unknown action: ${e.cmd}`)}}function pipeline(e,t){let n=t;for(let t=0;t<e.length;t++){const r=e[t],i=r.name??r.cmd;console.log(`running action [${i}], ${r.cmd}(input=${n})`),n=runAction(r,n)}}console.log(`Actions: ${scriptArgs[0]}`),pipeline(JSON.parse(scriptArgs[0]),scriptArgs[1])})()})();